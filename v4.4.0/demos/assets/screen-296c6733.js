import{fo as l,fp as _,gL as le,c6 as L,gN as je,fr as Me,fs as Re,c9 as v,ch as y,hN as J,cc as ve,hH as E,ce as p,ci as _e,cj as Ee,cd as x,c3 as oe,c4 as Ie,cg as fe,lx as Ge,hJ as Ke,hI as Fe,ly as Ye,fn as Pe,hv as Ae,hw as Ve,hx as Oe,c5 as He,c8 as Je,hu as Ne,cf as O,cb as P,hS as Xe,lz as Ze,i5 as Qe,hY as S,lA as et,lB as W,c7 as tt,ca as D,gM as at,ln as lt}from"./main-0e79698b.js";import"./preload-helper-388ac9d5.js";function q(e,a,t){return Math.max(a,Math.min(e,t))}function M(e,a=2){return e.toFixed(a).replace(/\.?0+$/,"")}function Le(e){return e.endsWith(".")?NaN:(parseFloat(e)%360+360)%360/360}function Ue(e){return M(360*e)}function X(e){if(!e.endsWith("%"))return NaN;const a=e.substring(0,e.length-1);if(a.endsWith("."))return NaN;const t=parseFloat(a);return Number.isNaN(t)?NaN:q(t,0,100)/100}function ce(e){return M(100*e)+"%"}function he(e){if(e.endsWith("%"))return X(e);if(e.endsWith("."))return NaN;const a=parseFloat(e);return Number.isNaN(a)?NaN:q(a,0,255)/255}function ge(e){return M(255*e)}function be(e){return e.endsWith("%")?X(e):q(parseFloat(e),0,1)}function me(e){return String(e)}const Ce={hsl:{h:{to:Ue,from:Le},s:{to:ce,from:X},l:{to:ce,from:X},a:{to:me,from:be}},hwb:{h:{to:Ue,from:Le},w:{to:ce,from:X},b:{to:ce,from:X},a:{to:me,from:be}},rgb:{r:{to:ge,from:he},g:{to:ge,from:he},b:{to:ge,from:he},a:{to:me,from:be}}};function ue(e){const a=e.replace(/^#/,""),t=[],r=a.length>4?2:1;for(let b=0;b<a.length;b+=r){const $=a.slice(b,b+r);t.push($.repeat(r%2+1))}t.length===3&&t.push("ff");const s=t.map(b=>parseInt(b,16)/255);return{r:s[0],g:s[1],b:s[2],a:s[3]}}function ye(e){const a=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,t=2*e.l-a;return{r:we(t,a,e.h+1/3),g:we(t,a,e.h),b:we(t,a,e.h-1/3),a:e.a}}function we(e,a,t){return t<0?t+=1:t>1&&(t-=1),t<1/6?e+6*(a-e)*t:t<.5?a:t<2/3?e+(a-e)*(2/3-t)*6:e}function ae(e){return{r:xe(5,e),g:xe(3,e),b:xe(1,e),a:e.a}}function xe(e,a){const t=(e+6*a.h)%6;return a.v-a.v*a.s*Math.max(0,Math.min(t,4-t,1))}function K(e){return{h:e.h,s:e.b===1?0:1-e.w/(1-e.b),v:1-e.b,a:e.a}}function Y(e){const a=Math.min(e.r,e.g,e.b),t=Math.max(e.r,e.g,e.b);let r;return r=t===a?0:t===e.r?(0+(e.g-e.b)/(t-a))/6:t===e.g?(2+(e.b-e.r)/(t-a))/6:(4+(e.r-e.g)/(t-a))/6,r<0&&(r+=1),{h:r,w:a,b:1-t,a:e.a}}function ke(e){const a=Y(e),t=a.w,r=1-a.b,s=(r+t)/2;let b;return b=r===0||t===1?0:(r-s)/Math.min(s,1-s),{h:a.h,s:b,l:s,a:e.a}}function de(e){return"#"+Object.values(e).map(a=>{const t=255*a,r=Math.round(t).toString(16);return r.length===1?"0"+r:r}).join("")}const ot={hex:[["hsl",e=>N(e,[ue,ke])],["hsv",e=>N(e,[ue,Y,K])],["hwb",e=>N(e,[ue,Y])],["rgb",ue]],hsl:[["hex",e=>N(e,[ye,de])],["hsv",function(e){const a=e.l+e.s*Math.min(e.l,1-e.l),t=a===0?0:2-2*e.l/a;return{h:e.h,s:t,v:a,a:e.a}}],["hwb",e=>N(e,[ye,Y])],["rgb",ye]],hsv:[["hex",e=>N(e,[ae,de])],["hsl",function(e){const a=e.v-e.v*e.s/2,t=Math.min(a,1-a),r=t===0?0:(e.v-a)/t;return{h:e.h,s:r,l:a,a:e.a}}],["hwb",function(e){return{h:e.h,w:(1-e.s)*e.v,b:1-e.v,a:e.a}}],["rgb",ae]],hwb:[["hex",e=>N(e,[K,ae,de])],["hsl",e=>N(e,[K,ae,ke])],["hsv",K],["rgb",e=>N(e,[K,ae])]],rgb:[["hex",de],["hsl",ke],["hsv",e=>N(e,[Y,K])],["hwb",Y]]};function N(e,a){return a.reduce((t,r)=>r(t),e)}function pe(e){const a={};for(const t in e)a[t]=e[t];return a}const rt={hex:(e,a)=>a&&[5,9].includes(e.length)?e.substring(0,e.length-(e.length-1)/4):e,hsl:(e,a)=>`hsl(${M(360*e.h)} ${M(100*e.s)}% ${M(100*e.l)}%`+(a?")":` / ${M(e.a)})`),hwb:(e,a)=>`hwb(${M(360*e.h)} ${M(100*e.w)}% ${M(100*e.b)}%`+(a?")":` / ${M(e.a)})`),rgb:(e,a)=>`rgb(${M(255*e.r)} ${M(255*e.g)} ${M(255*e.b)}`+(a?")":` / ${M(e.a)})`)};function Be(e,a,t){return rt[a](e,t)}function De(e){return/^#(?:(?:[A-F0-9]{2}){3,4}|[A-F0-9]{3,4})$/i.test(e)}function nt(e){if(typeof e!="string")return{format:function(c){return Object.prototype.hasOwnProperty.call(c,"r")?"rgb":Object.prototype.hasOwnProperty.call(c,"w")?"hwb":Object.prototype.hasOwnProperty.call(c,"v")?"hsv":"hsl"}(e),color:e};if(De(e))return{format:"hex",color:e};if(!e.includes("(")){const g=document.createElement("canvas").getContext("2d");g.fillStyle=e;const c=g.fillStyle;return c==="#000000"&&e!=="black"?null:{format:"hex",color:c}}const[a,t]=e.split("("),r=a.substring(0,3),s=t.replace(/[,/)]/g," ").replace(/\s+/g," ").trim().split(" ");s.length===3&&s.push("1");const b=(r+"a").split(""),$=Object.fromEntries(b.map((g,c)=>[g,Ce[r][g].from(s[c])]));return{format:r,color:$}}const ze=["hex","hsl","hwb","rgb"],it=["show","hide"],st={class:"vacp-range-input-group"},ct=["for"],ut={class:"vacp-range-input-label-text vacp-range-input-label-text--hue"},dt=["id","value"],pt=["for"],vt={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},ft=["id","value"],ht=l("span",{class:"vacp-visually-hidden"},"Copy color",-1),gt=l("svg",{class:"vacp-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 32 32"},[l("path",{d:"M25.313 28v-18.688h-14.625v18.688h14.625zM25.313 6.688c1.438 0 2.688 1.188 2.688 2.625v18.688c0 1.438-1.25 2.688-2.688 2.688h-14.625c-1.438 0-2.688-1.25-2.688-2.688v-18.688c0-1.438 1.25-2.625 2.688-2.625h14.625zM21.313 1.313v2.688h-16v18.688h-2.625v-18.688c0-1.438 1.188-2.688 2.625-2.688h16z",fill:"currentColor"})],-1),bt={class:"vacp-color-inputs"},mt={class:"vacp-color-input-group"},yt=["for"],wt=l("span",{class:"vacp-color-input-label-text"}," Hex ",-1),xt=["id","value"],kt=["id","for","onInput"],zt={class:"vacp-color-input-label-text"},St=["id","value","onInput"],$t=l("span",{class:"vacp-visually-hidden"},"Switch format",-1),_t=l("svg",{class:"vacp-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[l("path",{d:"M8 15l5-5-1-1-4 2-4-2-1 1zm4-9l1-1-5-5-5 5 1 1 4-2z",fill:"currentColor"})],-1);var We={__name:"ColorPicker",props:{color:{type:[String,Object],default:"#ffffffff"},id:{type:String,default:"color-picker"},visibleFormats:{type:Array,default:()=>ze,validator:e=>e.length>0&&e.every(a=>ze.includes(a))},defaultFormat:{type:String,default:"hsl",validator:e=>ze.includes(e)},alphaChannel:{type:String,default:"show",validator:e=>it.includes(e)}},emits:["color-change"],setup(e,{emit:a}){const t=e,r=_(null),s=_(null),b=_(null),$=_(!1),g=_(t.visibleFormats.includes(t.defaultFormat)?t.defaultFormat:t.visibleFormats[0]),c=le({hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}),U=L(function(){const o=Object.keys(c[g.value]);return g.value!=="hex"&&t.alphaChannel==="hide"?o.slice(0,3):o}),H=L(function(){return t.alphaChannel==="hide"&&[5,9].includes(c.hex.length)?c.hex.substring(0,c.hex.length-(c.hex.length-1)/4):c.hex});function z(){const o=(t.visibleFormats.findIndex(i=>i===g.value)+1)%t.visibleFormats.length;g.value=t.visibleFormats[o]}function f(o){$.value=!0,C(o)}function m(o){$.value=!0,B(o)}function V(){$.value=!1}function C(o){o.buttons===1&&$.value!==!1&&s.value instanceof HTMLElement&&I(s.value,o.clientX,o.clientY)}function B(o){if($.value===!1||!(s.value instanceof HTMLElement))return;o.preventDefault();const i=o.touches[0];I(s.value,i.clientX,i.clientY)}function I(o,i,h){const w=function(A,G,te){const n=A.getBoundingClientRect(),u=G-n.left,T=te-n.top;return{x:q(u/n.width,0,1),y:q(1-T/n.height,0,1)}}(o,i,h),k=pe(c.hsv);k.s=w.x,k.v=w.y,j("hsv",k)}function d(o){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(o.key))return;o.preventDefault();const i=["ArrowLeft","ArrowDown"].includes(o.key)?-1:1,h=["ArrowLeft","ArrowRight"].includes(o.key)?"s":"v",w=o.shiftKey?10:1,k=c.hsv[h]+i*w*.01,A=pe(c.hsv);A[h]=q(k,0,1),j("hsv",A)}function Z(o){const i=nt(o);i!==null&&j(i.format,i.color)}function re(o,i){const h=o.currentTarget,w=pe(c.hsv);w[i]=parseInt(h.value)/parseInt(h.max),j("hsv",w)}function Q(o){const i=o.target;De(i.value)&&j("hex",i.value)}function ee(o,i){const h=o.target,w=pe(c[g.value]),k=Ce[g.value][i].from(h.value);Number.isNaN(k)||k===void 0||(w[i]=k,j(g.value,w))}function j(o,i){let h=i;if(t.alphaChannel==="hide")if(typeof i!="string")i.a=1,h=i;else if([5,9].includes(i.length)){const w=(i.length-1)/4;h=i.substring(0,i.length-w)+"f".repeat(w)}else[4,7].includes(i.length)&&(h=i+"f".repeat((i.length-1)/3));if(!function(w,k){if(typeof w=="string"||typeof k=="string")return w===k;for(const A in w)if(w[A]!==k[A])return!1;return!0}(c[o],h)){(function(k,A){c[k]=A;for(const[G,te]of ot[k])c[G]=te(c[k])})(o,h);const w=function(){const k=t.alphaChannel==="hide",A=Be(c[g.value],g.value,k);return{colors:c,cssColor:A}}();a("color-change",w)}(function(){r.value instanceof HTMLElement&&s.value instanceof HTMLElement&&b.value instanceof HTMLElement&&(r.value.style.setProperty("--vacp-hsl-h",String(c.hsl.h)),r.value.style.setProperty("--vacp-hsl-s",String(c.hsl.s)),r.value.style.setProperty("--vacp-hsl-l",String(c.hsl.l)),r.value.style.setProperty("--vacp-hsl-a",String(c.hsl.a)),s.value.style.position="relative",s.value.style.backgroundColor="hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%)",s.value.style.backgroundImage="linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)",b.value.style.boxSizing="border-box",b.value.style.position="absolute",b.value.style.left=100*c.hsv.s+"%",b.value.style.bottom=100*c.hsv.v+"%")})()}async function ne(){const o=c[g.value],i=t.alphaChannel==="hide",h=Be(o,g.value,i);await window.navigator.clipboard.writeText(h)}function ie(o,i){return Ce[o][i].to(c[o][i])}function se(o){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(o.key)||!o.shiftKey)return;const i=o.currentTarget,h=parseFloat(i.step),w=["ArrowLeft","ArrowDown"].includes(o.key)?-1:1,k=q(parseFloat(i.value)+w*h*10,parseInt(i.min),parseInt(i.max));i.value=String(k-w*h)}return je(()=>t.color,Z),Me(function(){document.addEventListener("mousemove",C,{passive:!1}),document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("mouseup",V),document.addEventListener("touchend",V),Z(t.color)}),Re(function(){document.removeEventListener("mousemove",C),document.removeEventListener("touchmove",B),document.removeEventListener("mouseup",V),document.removeEventListener("touchend",V)}),(o,i)=>(v(),y("div",{ref_key:"colorPicker",ref:r,class:"vacp-color-picker"},[l("div",{ref_key:"colorSpace",ref:s,class:"vacp-color-space",onMousedown:f,onTouchstart:m},[l("div",{ref_key:"thumb",ref:b,class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:d},null,544)],544),l("div",st,[l("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${e.id}-hue-slider`},[l("span",ut,[J(o.$slots,"hue-range-input-label",{},()=>[ve("Hue")])]),l("input",{id:`${e.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:360*c.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:se,onInput:i[0]||(i[0]=h=>re(h,"h"))},null,40,dt)],8,ct),e.alphaChannel==="show"?(v(),y("label",{key:0,class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${e.id}-alpha-slider`},[l("span",vt,[J(o.$slots,"alpha-range-input-label",{},()=>[ve("Alpha")])]),l("input",{id:`${e.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:100*c.hsv.a,type:"range",min:"0",max:"100",step:"1",onKeydownPassive:se,onInput:i[1]||(i[1]=h=>re(h,"a"))},null,40,ft)],8,pt)):E("v-if",!0)]),l("button",{class:"vacp-copy-button",type:"button",onClick:ne},[J(o.$slots,"copy-button",{},()=>[ht,gt])]),l("div",bt,[l("div",mt,[g.value==="hex"?(v(),y("label",{key:0,class:"vacp-color-input-label",for:`${e.id}-color-hex`},[wt,l("input",{id:`${e.id}-color-hex`,class:"vacp-color-input",type:"text",value:p(H),onInput:Q},null,40,xt)],8,yt)):(v(!0),y(_e,{key:1},Ee(p(U),h=>(v(),y("label",{id:`${e.id}-color-${g.value}-${h}-label`,key:`${e.id}-color-${g.value}-${h}-label`,class:"vacp-color-input-label",for:`${e.id}-color-${g.value}-${h}`,onInput:w=>ee(w,h)},[l("span",zt,x(h.toUpperCase()),1),l("input",{id:`${e.id}-color-${g.value}-${h}`,class:"vacp-color-input",type:"text",value:ie(g.value,h),onInput:w=>ee(w,h)},null,40,St)],40,kt))),128))]),e.visibleFormats.length>1?(v(),y("button",{key:0,class:"vacp-format-switch-button",type:"button",onClick:z},[J(o.$slots,"format-switch-button",{},()=>[$t,_t])])):E("v-if",!0)])],512))}};(function(e,a){a===void 0&&(a={});var t=a.insertAt;if(e&&typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}})(".vacp-color-picker{--vacp-color:hsl(calc(var(--vacp-hsl-h)*360) calc(var(--vacp-hsl-s)*100%) calc(var(--vacp-hsl-l)*100%)/var(--vacp-hsl-a));--vacp-focus-color:#19f;--vacp-focus-outline:2px solid var(--vacp-focus-color);--vacp-border-width:1px;--vacp-border-color:#000;--vacp-border:var(--vacp-border-width) solid var(--vacp-border-color);--vacp-color-space-width:300px;--vacp-spacing:6px;grid-gap:var(--vacp-spacing);background-color:#fff;display:grid;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:.8em;grid-template-columns:1fr min-content;max-width:var(--vacp-color-space-width);padding:var(--vacp-spacing)}.vacp-color-picker *,.vacp-color-picker :after,.vacp-color-picker :before{box-sizing:border-box}.vacp-color-picker button::-moz-focus-inner{border:none;padding:0}.vacp-color-picker :focus{outline:var(--vacp-focus-outline)}.vacp-color-space{grid-column:1/-1;height:calc(var(--vacp-color-space-width)*.6);overflow:hidden}.vacp-color-space-thumb{--vacp-thumb-size:calc(var(--vacp-spacing)*4);border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);height:var(--vacp-thumb-size);margin-bottom:calc(var(--vacp-thumb-size)*-1/2);margin-left:calc(var(--vacp-thumb-size)*-1/2);width:var(--vacp-thumb-size)}.vacp-color-space-thumb:focus{box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color),0 0 0 3px var(--vacp-focus-color);outline-color:transparent}.vacp-range-input-label{--vacp-slider-track-width:100%;--vacp-slider-track-height:calc(var(--vacp-spacing)*3);display:block}.vacp-range-input-group{display:flex;flex-direction:column;justify-content:center}.vacp-range-input-group>:not(:first-child){margin-top:var(--vacp-spacing)}.vacp-range-input,.vacp-range-input::-webkit-slider-thumb{-webkit-appearance:none}.vacp-range-input{background:none;border:none;display:block;height:var(--vacp-slider-track-height);margin-bottom:calc(var(--vacp-spacing)/2 + 1px);margin-left:0;margin-right:0;margin-top:calc(var(--vacp-spacing)/2 + 1px);padding:0;width:var(--vacp-slider-track-width)}.vacp-range-input:focus{outline:none}.vacp-range-input::-moz-focus-outer{border:none}.vacp-range-input--alpha{background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-position:0 0,var(--vacp-spacing) var(--vacp-spacing);background-size:calc(var(--vacp-spacing)*2) calc(var(--vacp-spacing)*2)}.vacp-range-input::-moz-range-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-webkit-slider-runnable-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-ms-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input:focus::-moz-range-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-webkit-slider-runnable-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-ms-track{outline:var(--vacp-focus-outline)}.vacp-range-input--alpha::-moz-range-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-webkit-slider-runnable-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-ms-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--hue::-moz-range-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-webkit-slider-runnable-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-ms-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input::-moz-range-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;width:var(--vacp-slider-track-height)}.vacp-range-input::-webkit-slider-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-range-input::-ms-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-copy-button{align-items:center;align-self:center;background-color:#fff;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;height:calc(var(--vacp-spacing)*6);justify-content:center;justify-self:center;overflow:hidden;position:relative;width:calc(var(--vacp-spacing)*6)}.vacp-copy-button:enabled:focus{border-color:var(--vacp-border-color);box-shadow:0 0 0 2px var(--vacp-focus-color);outline:none}.vacp-copy-button:enabled:hover{background-color:#0002}.vacp-color-inputs{align-items:center;display:flex;grid-column:1/-1}.vacp-color-inputs>:not(:first-child){margin-left:var(--vacp-spacing)}.vacp-color-input-group{column-gap:var(--vacp-spacing);display:grid;flex-grow:1;grid-auto-flow:column}.vacp-color-input-label{text-align:center}.vacp-color-input{border:var(--vacp-border);margin:0;margin-top:calc(var(--vacp-spacing)/2);text-align:center;width:100%}.vacp-color-input,.vacp-format-switch-button{background-color:#fff;color:inherit;font:inherit;padding:var(--vacp-spacing)}.vacp-format-switch-button{align-items:center;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;justify-content:center;margin:0}.vacp-format-switch-button:enabled:focus{border-color:var(--vacp-border-color)}.vacp-format-switch-button:enabled:hover{background-color:#0002}.vacp-visually-hidden{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}"),We.__file="src/ColorPicker.vue";const Et={class:"flex justify-end mb-20"},Ft=["disabled"],Se=oe({__name:"form-footer",props:{disabled:{type:Boolean,default:!0}},setup(e){const{t:a}=Ie();return(t,r)=>(v(),y("div",Et,[l("button",{class:"hover:bg-gray-200 text-gray-600 font-bold py-8 px-16 m-2",type:"button",onClick:r[0]||(r[0]=s=>t.$emit("cancel"))},x(p(a)("wizard.step.cancel")),1),l("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-8 px-16 m-2 disabled:bg-gray-200 disabled:cursor-default disabled:text-gray-400",type:"button",disabled:e.disabled,onClick:r[1]||(r[1]=s=>t.$emit("submit"))},x(p(a)("wizard.step.continue")),9,Ft)]))}}),qe=e=>(Ae("data-v-2122a1a9"),e=e(),Ve(),e),Ct={class:"input-wrapper mb-12"},Mt={key:0},It={class:"text-base font-bold"},At={class:"relative py-8 mb-0.5 h-75","data-type":"file"},Vt=qe(()=>l("div",{class:"upload-mask absolute inset-0 flex border-dashed border-2 border-gray-400 pointer-events-none justify-center"},[l("svg",{class:"w-30 h-30 m-auto",fill:"#a8a8a8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 58 58"},[l("path",{d:"M29,58A29,29,0,1,0,0,29,29,29,0,0,0,29,58ZM29,4A25,25,0,1,1,4,29,25,25,0,0,1,29,4Z"}),l("polygon",{points:"27 22 27 44.4 31 44.4 31 22 41.7 31.1 44.3 28.1 29 15 13.7 28.1 16.3 31.1 27 22"})])],-1)),Ot={class:"text-gray-400 text-xs mb-1"},Tt={key:1},Nt={class:"text-base font-bold"},Lt={class:"mb-0.5","data-type":"url"},Ut=["value"],Bt={key:0,class:"text-red-900 text-xs"},jt={key:2},Rt={class:"text-base font-bold"},Pt={key:0,class:"flex items-center pb-4 min-w-0"},Ht=["aria-label","placeholder"],Dt=qe(()=>l("div",{class:"-ml-30"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",fit:"",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",focusable:"false",class:"fill-current w-24 h-24 flex-shrink-0"},[l("g",{id:"search_cache224"},[l("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})])])],-1)),Wt={class:"relative mb-0.5","data-type":"select"},qt={key:0},Gt=["value"],Kt={class:"text-gray-400 text-xs mb-1"},Yt={key:0,class:"text-red-900 text-xs"},Jt={key:1},Xt=["size","value"],Zt=["value"],Qt={key:0,class:"text-red-900 text-xs"},ea={key:1,class:"text-red-900 text-xs"},ta={key:3},aa={class:"text-base font-bold"},la={class:"relative mb-0.5"},oa=["value"],ra={key:0,class:"text-red-900 text-xs"},na=oe({__name:"form-input",props:{defaultOption:{type:Boolean,default:!1},formatError:{type:Boolean,default:!1},failureError:{type:Boolean,default:!1},help:{type:[String,Boolean],default:!1},label:{type:[String,Boolean],default:!1},modelValue:{type:[String,Array],default:""},name:{type:[String,Boolean],default:!1},options:{type:Array,default(){return[]}},size:{type:[Number,String],default:0},multiple:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},type:{type:String,default:"text"},url:{type:[String,Boolean],default:!1},validation:{type:Boolean,default:!1},validationMessages:{type:Object}},emits:["update:modelValue","link","select","upload","text"],setup(e,{emit:a}){const t=e,{t:r}=Ie(),s=_(!1),b=_(!1),$=_(!1),g=_([]),c=_("");if(t.defaultOption&&t.modelValue===""&&t.options.length){let z=t.options[0].value;if(t.name==="latField"){const f=new RegExp(/^(y|lat.*)$/i);z=t.options.find(V=>f.test(V.label))?.value||z}else if(t.name==="longField"){const f=new RegExp(/^(x|long.*)$/i);z=t.options.find(V=>f.test(V.label))?.value||z}a("update:modelValue",z)}const U=z=>{let f;try{f=new URL(z)}catch{return s.value=!1,!1}f.protocol==="http:"||f.protocol==="https:"?s.value=!0:s.value=!1},H=z=>{z&&z.length>0?$.value=!1:$.value=!0};return(z,f)=>(v(),y("div",Ct,[e.type==="file"?(v(),y("div",Mt,[l("label",It,x(e.label),1),l("div",At,[l("input",{class:"absolute w-full opacity-0 inset-0 cursor-pointer",type:"file",name:"file",accept:".geojson,.json,.csv,.zip",onInput:f[0]||(f[0]=m=>{a("upload",m.target.files[0]),m.target.value=""})},null,32),Vt]),l("div",Ot,x(e.help),1)])):e.type==="url"?(v(),y("div",Tt,[l("label",Nt,x(e.label),1),l("div",Lt,[l("input",{class:"text-sm w-full border-solid border-gray-300 mb-5 leading-5 focus:border-green-500",type:"url",name:"url",value:e.modelValue,onChange:f[1]||(f[1]=m=>s.value?b.value=!1:b.value=!0),onInput:f[2]||(f[2]=m=>{U(m.target.value),a("link",m.target.value,s.value),b.value=!1})},null,40,Ut)]),b.value?(v(),y("div",Bt,x(e.modelValue?e.validationMessages?.invalid:e.validationMessages?.required),1)):E("",!0)])):e.type==="select"?(v(),y("div",jt,[l("label",Rt,x(e.label),1),e.searchable&&e.options.length>4?(v(),y("div",Pt,[fe(l("input",{onKeypress:f[3]||(f[3]=Ke(Fe(()=>{},["prevent"]),["enter"])),enterkeyhint:"done","onUpdate:modelValue":f[4]||(f[4]=m=>c.value=m),class:"rv-global-search rv-input w-full min-w-0","aria-invalid":"false","aria-label":p(r)("wizard.configure.sublayers.search"),placeholder:p(r)("wizard.configure.sublayers.search")},null,40,Ht),[[Ge,c.value]]),Dt])):E("",!0),l("div",Wt,[e.multiple?(v(),y("div",qt,[fe(l("select",{class:"block border-solid border-gray-300 w-full p-3 overflow-y-auto",multiple:"","onUpdate:modelValue":f[5]||(f[5]=m=>g.value=m),onChange:f[6]||(f[6]=()=>{a("select",g.value),H(g.value)})},[(v(!0),y(_e,null,Ee(e.options.filter(m=>m.label.toLowerCase().includes(c.value.toLowerCase().trim())),m=>(v(),y("option",{class:"p-6",key:m.label,value:m.value},x(m.label),9,Gt))),128))],544),[[Ye,g.value]]),l("div",Kt,x(e.help),1),e.validation&&$.value?(v(),y("div",Yt,x(e.validationMessages?.required),1)):E("",!0)])):(v(),y("div",Jt,[l("select",{class:Pe(["block border-solid border-gray-300 w-full p-3 overflow-y-auto",e.size&&"configure-select"]),size:e.size,value:e.modelValue,onInput:f[7]||(f[7]=m=>e.size?a("select",m.target.value):a("update:modelValue",m.target.value))},[(v(!0),y(_e,null,Ee(e.options,m=>(v(),y("option",{class:"p-6",key:m.label,value:m.value},x(m.label),9,Zt))),128))],42,Xt),e.validation&&e.formatError?(v(),y("div",Qt,x(e.validationMessages?.invalid),1)):E("",!0),e.validation&&e.failureError?(v(),y("div",ea,x(e.validationMessages?.failure),1)):E("",!0)]))])])):(v(),y("div",ta,[l("label",aa,x(e.label),1),l("div",la,[l("input",{class:"border-solid border-gray-300 p-3 w-full",type:"text",value:e.modelValue,onChange:f[8]||(f[8]=m=>a("text",m.target.value))},null,40,oa)]),e.validation&&!e.modelValue?(v(),y("div",ra,x(e.validationMessages?.required),1)):E("",!0)]))]))}});const R=Oe(na,[["__scopeId","data-v-2122a1a9"]]),ia=e=>(Ae("data-v-674cf5db"),e=e(),Ve(),e),sa={class:"step relative flex flex-col px-12 overflow-y-hidden"},ca={class:"stepper-header flex pb-24"},ua={key:1,class:"flex-none stepper-check w-24 h-24 text-gray-400"},da=ia(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",focusable:"false"},[l("g",{id:"check_circle"},[l("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])],-1)),pa=[da],va={class:"flex flex-col overflow-hidden"},fa={class:"pl-12 flex items-center text-md"},ha={class:"pl-12 text-xs transition-opacity duration-1000 ease-out"},ga={class:"pl-36"},ba=oe({__name:"stepper-item",props:{title:{type:String,required:!0},summary:{type:String}},setup(e){const a=He("stepper"),t=_(-1);Me(()=>{t.value=a.numSteps++});const r=()=>a.activeIndex>t.value,s=()=>a.activeIndex===t.value;return(b,$)=>{const g=Je("truncate");return v(),y("div",sa,[l("div",ca,[r()?(v(),y("div",ua,pa)):(v(),y("div",{key:0,class:Pe(["w-24 h-24 bg-gray-400 rounded-full flex justify-center items-center text-white text-xs font-semibold",{"bg-blue-500":s}])},x(t.value+1),3)),l("div",va,[l("div",fa,x(e.title),1),fe((v(),y("div",ha,[ve(x(e.summary),1)])),[[Ne,!s()],[g]])])]),O(Xe,{name:"step",mode:"out-in"},{default:P(()=>[fe(l("div",ga,[J(b.$slots,"default",{},void 0,!0)],512),[[Ne,s()]])]),_:3})])}}});const $e=Oe(ba,[["__scopeId","data-v-674cf5db"]]),ma={class:"py-12"},ya=oe({__name:"stepper",props:{activeStep:{type:Number,default:0}},setup(e){const a=e,t=L(()=>a.activeStep),r=le([]),s=le({activeIndex:a.activeStep,numSteps:0});return Ze("stepper",s),r.push(je(t,()=>{s.activeIndex=a.activeStep})),Re(()=>{r.forEach(b=>b())}),(b,$)=>(v(),y("div",ma,[J(b.$slots,"default")]))}}),Te=e=>(Ae("data-v-17b719c3"),e=e(),Ve(),e),wa=Te(()=>l("span",{class:"block text-center mb-10"},"or",-1)),xa={key:0,class:"inline-flex items-center mb-10"},ka=Te(()=>l("svg",{class:"inline-block fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[l("path",{d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})],-1)),za={class:"px-5 text-xs"},Sa=["for"],$a={key:6,class:"text-base font-bold"},_a={class:"sr-only"},Ea={class:"sr-only"},Fa=Te(()=>l("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15"},[l("path",{d:"M5 0v2H1v13h12v-3h-1v2H2V5h10v3h1V2H9V0zm1 1h2v2h3v1H3V3h3z",fill:"currentColor"}),l("path",{d:"M10 7v2h5v2h-5v2l-3-3zM3 6h5v1H3zm0 2h3v1H3zm0 2h3v1H3zm0 2h5v1H3z",fill:"currentColor"})],-1)),Ca=oe({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const a=Qe(),{t}=Ie(),r=He("iApi"),s=_(),b=L(()=>a.layerSource),$=L(()=>a.currStep),g=_(),c=_(),U=_(!1),H=_(!1),z=_(!1),f=_(!1),m=le([{value:S.FEATURE,label:t("wizard.layerType.esriFeature")},{value:S.MAPIMAGE,label:t("wizard.layerType.esriMapImage")},{value:S.TILE,label:t("wizard.layerType.esriTile")},{value:S.IMAGERY,label:t("wizard.layerType.esriImagery")},{value:S.WMS,label:t("wizard.layerType.ogcWms")},{value:S.WFS,label:t("wizard.layerType.ogcWfs")}]),V=le([{value:S.GEOJSON,label:t("wizard.fileType.geojson")},{value:S.SHAPEFILE,label:t("wizard.fileType.shapefile")},{value:S.CSV,label:t("wizard.fileType.csv")}]),C=L({get(){return a.url},set(n){a.url=n}}),B=L({get(){return a.fileData},set(n){a.fileData=n}}),I=L({get(){return a.typeSelection},set(n){a.typeSelection=n}}),d=L({get(){return a.layerInfo},set(n){a.layerInfo=n}}),Z=L(()=>{let n=r.geo.proxy!=="";switch(I.value){case S.FEATURE:case S.MAPIMAGE:case S.TILE:case S.IMAGERY:return!n;case S.WFS:return!0;case S.WMS:return!n;case S.GEOJSON:case S.SHAPEFILE:case S.CSV:return!!(o()&&!B.value);default:return!1}});et(()=>(($.value===W.FORMAT||$.value===W.CONFIGURE)&&(U.value=!0,a.goToStep(W.FORMAT)),!1)),Me(()=>{$.value===W.CONFIGURE&&(d.value?.configOptions.includes("colour")&&G(),f.value=!d.value?.configOptions.includes("sublayers")&&!!d.value?.config.name)});const re=async n=>{const u=new FileReader;u.onload=T=>{B.value=u.result,C.value=n.name,Q(T)},u.readAsArrayBuffer(n)},Q=n=>{n?.preventDefault(),I.value=b.value.guessFormatFromURL(C.value),a.goToStep(W.FORMAT)},ee=async()=>{H.value=!1;try{d.value=o()?await b.value.fetchFileInfo(C.value,I.value,B.value):await b.value.fetchServiceInfo(C.value,I.value),o()&&B.value&&(d.value.config.url="")}catch{H.value=!0;return}const n=I.value===S.FEATURE&&!(d.value&&d.value.fields);if(!d.value||n){U.value=!0,d.value={config:{id:"Placeholder",layerType:S.UNKNOWN,url:""},configOptions:[]};return}G(),a.goToStep(W.CONFIGURE),d.value.configOptions.includes("sublayers")?f.value=!1:f.value=!0},j=async n=>{const u=Object.assign(d.value.config,n),T=r.geo.layer.createLayer(u);r.geo.map.addLayer(T),T.userAdded=!0,r.event.emit(at.USER_LAYER_ADDED,T),z.value=!1,a.goToStep(W.UPLOAD)},ne=()=>d.value?.fields.map(n=>({value:n.name,label:n.alias||n.name})),ie=n=>d.value?.latLonFields[n].map(u=>({value:u,label:u})),se=()=>d.value?.layers.map((n,u)=>({label:`${n.indent}${n.name}`,value:I.value===S.MAPIMAGE?{index:n.id,state:{opacity:1,visibility:!0}}:{id:n.id},id:`${n.indent}${n.name}-${u}`})),o=()=>B.value||C.value.match(/\.(zip|csv|json|geojson)$/),i=n=>{re(n),C.value=""},h=(n,u)=>{C.value=n.trim(),u?z.value=!0:z.value=!1},w=n=>{I.value=n,U.value=!1},k=n=>{d.value.config.name=n;const u=d.value?.config.sublayers;(u?n&&u.length>0:n)?f.value=!0:f.value=!1},A=n=>{d.value.config.sublayers=n,n.length>0&&d.value?.config.name?f.value=!0:f.value=!1},G=()=>{g.value=d.value?.config.colour??"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");do c.value=Math.random().toString(36).substring(2,9);while(document.getElementById(c.value+"-hue-slider")!==null)},te=n=>{d.value.config.colour=n.colors.hex.substring(0,7),lt(()=>{s.value.querySelector(".vacp-copy-button").style.backgroundColor=d.value?.config.colour})};return(n,u)=>{const T=tt("panel-screen");return v(),D(T,{panel:e.panel},{header:P(()=>[ve(x(p(t)("wizard.title")),1)]),content:P(()=>[O(ya,{activeStep:$.value},{default:P(()=>[O($e,{title:p(t)("wizard.upload.title"),summary:C.value},{default:P(()=>[l("form",{name:"upload",onSubmit:Q},[O(R,{type:"file",name:"file",label:p(t)("wizard.upload.file.label"),help:p(t)("wizard.upload.file.help"),onUpload:i},null,8,["label","help"]),wa,O(R,{type:"url",name:"url",modelValue:C.value,"onUpdate:modelValue":u[0]||(u[0]=F=>C.value=F),label:p(t)("wizard.upload.url.label"),onLink:h,validation:!0,"validation-messages":{required:p(t)("wizard.upload.url.error.required"),invalid:p(t)("wizard.upload.url.error.url")}},null,8,["modelValue","label","validation-messages"]),O(Se,{onSubmit:Q,onCancel:u[1]||(u[1]=()=>{z.value=!1,p(a).goToStep(0)}),disabled:!z.value},null,8,["disabled"])],32)]),_:1},8,["title","summary"]),O($e,{title:p(t)("wizard.format.title"),summary:I.value},{default:P(()=>[l("form",{name:"format",onSubmit:ee},[Z.value?(v(),y("div",xa,[ka,l("span",za,x(p(t)("wizard.format.info.cors")),1)])):E("",!0),O(R,{type:"select",name:"type",modelValue:I.value,"onUpdate:modelValue":u[2]||(u[2]=F=>I.value=F),onSelect:w,size:o()?V.length:m.length,label:o()?p(t)("wizard.format.type.file"):p(t)("wizard.format.type.service"),options:o()?V:m,formatError:U.value,failureError:H.value,validation:!0,"validation-messages":{required:p(t)("wizard.format.type.error.required"),invalid:p(t)("wizard.format.type.error.invalid"),failure:`${p(t)("wizard.format.type.error.failure")}.${Z.value?" "+p(t)("wizard.format.warn.cors")+".":""}`},onKeydown:u[3]||(u[3]=Fe(()=>{},["stop"]))},null,8,["modelValue","size","label","options","formatError","failureError","validation-messages"]),O(Se,{onSubmit:ee,onCancel:u[4]||(u[4]=()=>{U.value=!1,H.value=!1,C.value?z.value=!0:z.value=!1,p(a).goToStep(0)}),disabled:!1})],32)]),_:1},8,["title","summary"]),O($e,{title:p(t)("wizard.configure.title")},{default:P(()=>[l("form",{name:"configure",onSubmit:j,ref_key:"formElement",ref:s},[d.value?.configOptions.includes("name")?(v(),D(R,{key:0,type:"text",name:"name",modelValue:d.value.config.name,"onUpdate:modelValue":u[5]||(u[5]=F=>d.value.config.name=F),onText:k,label:p(t)("wizard.configure.name.label"),validation:!0,"validation-messages":{required:p(t)("wizard.configure.name.error.required")}},null,8,["modelValue","label","validation-messages"])):E("",!0),d.value?.configOptions.includes("nameField")?(v(),D(R,{key:1,type:"select",name:"nameField",modelValue:d.value.config.nameField,"onUpdate:modelValue":u[6]||(u[6]=F=>d.value.config.nameField=F),label:p(t)("wizard.configure.nameField.label"),defaultOption:!0,options:ne()},null,8,["modelValue","label","options"])):E("",!0),d.value?.configOptions.includes("tooltipField")?(v(),D(R,{key:2,type:"select",name:"tooltipField",modelValue:d.value.config.tooltipField,"onUpdate:modelValue":u[7]||(u[7]=F=>d.value.config.tooltipField=F),label:p(t)("wizard.configure.tooltipField.label"),options:ne()},null,8,["modelValue","label","options"])):E("",!0),d.value?.configOptions.includes("latField")?(v(),D(R,{key:3,type:"select",name:"latField",modelValue:d.value.config.latField,"onUpdate:modelValue":u[8]||(u[8]=F=>d.value.config.latField=F),defaultOption:!0,label:p(t)("wizard.configure.latField.label"),options:ie("lat")},null,8,["modelValue","label","options"])):E("",!0),d.value?.configOptions.includes("longField")?(v(),D(R,{key:4,type:"select",name:"longField",modelValue:d.value.config.longField,"onUpdate:modelValue":u[9]||(u[9]=F=>d.value.config.longField=F),defaultOption:!0,label:p(t)("wizard.configure.longField.label"),options:ie("lon")},null,8,["modelValue","label","options"])):E("",!0),d.value?.configOptions.includes("sublayers")?(v(),D(R,{key:5,type:"select",name:"sublayers",modelValue:d.value.config.sublayers,"onUpdate:modelValue":u[10]||(u[10]=F=>d.value.config.sublayers=F),onSelect:A,label:p(t)("wizard.configure.sublayers.label"),help:p(t)("wizard.configure.sublayers.help"),options:se(),multiple:!0,searchable:!0,validation:!0,"validation-messages":{required:p(t)("wizard.configure.sublayers.error.required")},onKeydown:u[11]||(u[11]=Fe(()=>{},["stop"]))},null,8,["modelValue","label","help","options","validation-messages"])):E("",!0),l("label",{class:"sr-only",for:`${c.value}-color-hex`},x(p(t)("wizard.configure.colour.hex")),9,Sa),d.value?.configOptions.includes("colour")?(v(),y("label",$a,x(p(t)("wizard.configure.colour.label")),1)):E("",!0),d.value?.configOptions.includes("colour")?(v(),D(p(We),{key:7,"alpha-channel":"hide","visible-formats":["hex"],"default-format":"hex",id:c.value,color:g.value,onColorChange:te},{"hue-range-input-label":P(()=>[l("span",_a,x(p(t)("wizard.configure.colour.hue")),1)]),"copy-button":P(()=>[l("span",Ea,x(p(t)("wizard.configure.colour.copy")),1),Fa]),_:1},8,["id","color"])):E("",!0),O(Se,{onSubmit:j,onCancel:u[12]||(u[12]=F=>p(a).goToStep(1)),disabled:!f.value},null,8,["disabled"])],544)]),_:1},8,["title"])]),_:1},8,["activeStep"])]),_:1},8,["panel"])}}});const Aa=Oe(Ca,[["__scopeId","data-v-17b719c3"]]);export{Aa as default};
