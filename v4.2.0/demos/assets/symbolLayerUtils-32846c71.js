import{_ as p}from"./preload-helper-388ac9d5.js";import{dt as d,c as n,r as a,U as h,du as b,dv as w,K as v,bP as z,dw as _}from"./main-66d02e41.js";let i=c();function c(){return new d(50)}function x(){i=c()}function I(e,r){if(e.type==="icon")return y(e,r);if(e.type==="object")return l(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function O(e,r){if(e.type==="icon")return g(e,r);if(e.type==="object")return L(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function y(e,r){if(e.resource?.href)return j(e.resource.href).then(t=>[t.width,t.height]);if(e.resource?.primitive)return a(r)?[r,r]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function g(e,r){return y(e,r).then(t=>{if(e.size==null)return t;const o=t[0]/t[1];return o>1?[e.size,e.size/o]:[e.size*o,e.size]})}function j(e){return h(e,{responseType:"image"}).then(r=>r.data)}function l(e,r){return B(e,r).then(t=>b(t))}async function L(e,r){const t=await l(e,r);return w(t,e)}async function B(e,r){if(!e.isPrimitive){const o=v(e.resource?.href),s=i.get(o);if(s!==void 0)return s;const f=await p(()=>import("./objectResourceUtils-da33dff6.js").then(m=>m.o),["./objectResourceUtils-da33dff6.js","./devEnvironmentUtils-f2a1f21e.js","./main-66d02e41.js","./preload-helper-388ac9d5.js","./main-a1b2c4c4.css","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./BufferView-599b9f20.js","./vec33-77c5b147.js","./DefaultMaterial_COLOR_GAMMA-46297849.js","./types-e1c0a5bf.js","./enums-64ab819c.js","./quat-1cda3bfc.js","./quatf64-3363c48e.js","./resourceUtils-a8ed8f9e.js","./basicInterfaces-b7051eb1.js","./Indices-b9f1f4bf.js","./NestedMap-7c434b47.js","./requestImageUtils-7def8f32.js","./sphere-ddfc1ec7.js","./lineSegment-d145c1a3.js","./VertexAttribute-15d1866a.js","./OrderIndependentTransparency-e1b3a745.js","./Texture-5918f818.js","./VertexArrayObject-5231ef1e.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-953ed0ab.js","./vec3f32-ad1dc57f.js","./doublePrecisionUtils-e3c3d0d8.js","./symbolColorUtils-193ed9e5.js"],import.meta.url),u=await f.fetch(o,{disableTextures:!0});return i.put(o,u.referenceBoundingBox),u.referenceBoundingBox}let t=null;if(e.resource&&e.resource.primitive&&(t=z(_(e.resource.primitive)),a(r)))for(let o=0;o<t.length;o++)t[o]*=r;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{x as clearBoundingBoxCache,y as computeIconLayerResourceSize,I as computeLayerResourceSize,O as computeLayerSize,l as computeObjectLayerResourceSize};
