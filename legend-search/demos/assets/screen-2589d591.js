import{gT as o,gY as _,hB as ae,gN as L,hv as je,gZ as Ce,g_ as Re,gQ as v,gX as m,h2 as Y,hp as ve,gV as C,gP as l,hc as $e,hd as _e,h6 as x,gK as le,gL as Pe,h0 as Ee,hS as Ge,gU as We,h3 as Me,h4 as Ie,gW as Ae,gM as He,g$ as Ke,h1 as Oe,hf as O,gS as R,hW as Ye,ir as Xe,iq as Ze,h_ as z,is as Je,it as H,gO as Qe,gR as P,iu as Te,hm as Ne,hj as et,hb as tt}from"./main-95e6e76d.js";import"./preload-helper-388ac9d5.js";function D(e,a,t){return Math.max(a,Math.min(e,t))}function I(e,a=2){return e.toFixed(a).replace(/\.?0+$/,"")}function Le(e){return e.endsWith(".")?NaN:(parseFloat(e)%360+360)%360/360}function Ue(e){return I(360*e)}function X(e){if(!e.endsWith("%"))return NaN;const a=e.substring(0,e.length-1);if(a.endsWith("."))return NaN;const t=parseFloat(a);return Number.isNaN(t)?NaN:D(t,0,100)/100}function ce(e){return I(100*e)+"%"}function fe(e){if(e.endsWith("%"))return X(e);if(e.endsWith("."))return NaN;const a=parseFloat(e);return Number.isNaN(a)?NaN:D(a,0,255)/255}function he(e){return I(255*e)}function ge(e){return e.endsWith("%")?X(e):D(parseFloat(e),0,1)}function be(e){return String(e)}const Fe={hsl:{h:{to:Ue,from:Le},s:{to:ce,from:X},l:{to:ce,from:X},a:{to:be,from:ge}},hwb:{h:{to:Ue,from:Le},w:{to:ce,from:X},b:{to:ce,from:X},a:{to:be,from:ge}},rgb:{r:{to:he,from:fe},g:{to:he,from:fe},b:{to:he,from:fe},a:{to:be,from:ge}}};function ue(e){const a=e.replace(/^#/,""),t=[],r=a.length>4?2:1;for(let g=0;g<a.length;g+=r){const S=a.slice(g,g+r);t.push(S.repeat(r%2+1))}t.length===3&&t.push("ff");const c=t.map(g=>parseInt(g,16)/255);return{r:c[0],g:c[1],b:c[2],a:c[3]}}function me(e){const a=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,t=2*e.l-a;return{r:ye(t,a,e.h+1/3),g:ye(t,a,e.h),b:ye(t,a,e.h-1/3),a:e.a}}function ye(e,a,t){return t<0?t+=1:t>1&&(t-=1),t<1/6?e+6*(a-e)*t:t<.5?a:t<2/3?e+(a-e)*(2/3-t)*6:e}function te(e){return{r:we(5,e),g:we(3,e),b:we(1,e),a:e.a}}function we(e,a){const t=(e+6*a.h)%6;return a.v-a.v*a.s*Math.max(0,Math.min(t,4-t,1))}function G(e){return{h:e.h,s:e.b===1?0:1-e.w/(1-e.b),v:1-e.b,a:e.a}}function K(e){const a=Math.min(e.r,e.g,e.b),t=Math.max(e.r,e.g,e.b);let r;return r=t===a?0:t===e.r?(0+(e.g-e.b)/(t-a))/6:t===e.g?(2+(e.b-e.r)/(t-a))/6:(4+(e.r-e.g)/(t-a))/6,r<0&&(r+=1),{h:r,w:a,b:1-t,a:e.a}}function xe(e){const a=K(e),t=a.w,r=1-a.b,c=(r+t)/2;let g;return g=r===0||t===1?0:(r-c)/Math.min(c,1-c),{h:a.h,s:g,l:c,a:e.a}}function de(e){return"#"+Object.values(e).map(a=>{const t=255*a,r=Math.round(t).toString(16);return r.length===1?"0"+r:r}).join("")}const at={hex:[["hsl",e=>N(e,[ue,xe])],["hsv",e=>N(e,[ue,K,G])],["hwb",e=>N(e,[ue,K])],["rgb",ue]],hsl:[["hex",e=>N(e,[me,de])],["hsv",function(e){const a=e.l+e.s*Math.min(e.l,1-e.l),t=a===0?0:2-2*e.l/a;return{h:e.h,s:t,v:a,a:e.a}}],["hwb",e=>N(e,[me,K])],["rgb",me]],hsv:[["hex",e=>N(e,[te,de])],["hsl",function(e){const a=e.v-e.v*e.s/2,t=Math.min(a,1-a),r=t===0?0:(e.v-a)/t;return{h:e.h,s:r,l:a,a:e.a}}],["hwb",function(e){return{h:e.h,w:(1-e.s)*e.v,b:1-e.v,a:e.a}}],["rgb",te]],hwb:[["hex",e=>N(e,[G,te,de])],["hsl",e=>N(e,[G,te,xe])],["hsv",G],["rgb",e=>N(e,[G,te])]],rgb:[["hex",de],["hsl",xe],["hsv",e=>N(e,[K,G])],["hwb",K]]};function N(e,a){return a.reduce((t,r)=>r(t),e)}function pe(e){const a={};for(const t in e)a[t]=e[t];return a}const lt={hex:(e,a)=>a&&[5,9].includes(e.length)?e.substring(0,e.length-(e.length-1)/4):e,hsl:(e,a)=>`hsl(${I(360*e.h)} ${I(100*e.s)}% ${I(100*e.l)}%`+(a?")":` / ${I(e.a)})`),hwb:(e,a)=>`hwb(${I(360*e.h)} ${I(100*e.w)}% ${I(100*e.b)}%`+(a?")":` / ${I(e.a)})`),rgb:(e,a)=>`rgb(${I(255*e.r)} ${I(255*e.g)} ${I(255*e.b)}`+(a?")":` / ${I(e.a)})`)};function Be(e,a,t){return lt[a](e,t)}function De(e){return/^#(?:(?:[A-F0-9]{2}){3,4}|[A-F0-9]{3,4})$/i.test(e)}function ot(e){if(typeof e!="string")return{format:function(d){return Object.prototype.hasOwnProperty.call(d,"r")?"rgb":Object.prototype.hasOwnProperty.call(d,"w")?"hwb":Object.prototype.hasOwnProperty.call(d,"v")?"hsv":"hsl"}(e),color:e};if(De(e))return{format:"hex",color:e};if(!e.includes("(")){const b=document.createElement("canvas").getContext("2d");b.fillStyle=e;const d=b.fillStyle;return d==="#000000"&&e!=="black"?null:{format:"hex",color:d}}const[a,t]=e.split("("),r=a.substring(0,3),c=t.replace(/[,/)]/g," ").replace(/\s+/g," ").trim().split(" ");c.length===3&&c.push("1");const g=(r+"a").split(""),S=Object.fromEntries(g.map((b,d)=>[b,Fe[r][b].from(c[d])]));return{format:r,color:S}}const ke=["hex","hsl","hwb","rgb"],rt=["show","hide"],nt={class:"vacp-range-input-group"},it=["for"],st={class:"vacp-range-input-label-text vacp-range-input-label-text--hue"},ct=["id","value"],ut=["for"],dt={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},pt=["id","value"],vt=o("span",{class:"vacp-visually-hidden"},"Copy color",-1),ft=o("svg",{class:"vacp-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 32 32"},[o("path",{d:"M25.313 28v-18.688h-14.625v18.688h14.625zM25.313 6.688c1.438 0 2.688 1.188 2.688 2.625v18.688c0 1.438-1.25 2.688-2.688 2.688h-14.625c-1.438 0-2.688-1.25-2.688-2.688v-18.688c0-1.438 1.25-2.625 2.688-2.625h14.625zM21.313 1.313v2.688h-16v18.688h-2.625v-18.688c0-1.438 1.188-2.688 2.625-2.688h16z",fill:"currentColor"})],-1),ht={class:"vacp-color-inputs"},gt={class:"vacp-color-input-group"},bt=["for"],mt=o("span",{class:"vacp-color-input-label-text"}," Hex ",-1),yt=["id","value"],wt=["id","for","onInput"],xt={class:"vacp-color-input-label-text"},kt=["id","value","onInput"],St=o("span",{class:"vacp-visually-hidden"},"Switch format",-1),zt=o("svg",{class:"vacp-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[o("path",{d:"M8 15l5-5-1-1-4 2-4-2-1 1zm4-9l1-1-5-5-5 5 1 1 4-2z",fill:"currentColor"})],-1);var qe={__name:"ColorPicker",props:{color:{type:[String,Object],default:"#ffffffff"},id:{type:String,default:"color-picker"},visibleFormats:{type:Array,default:()=>ke,validator:e=>e.length>0&&e.every(a=>ke.includes(a))},defaultFormat:{type:String,default:"hsl",validator:e=>ke.includes(e)},alphaChannel:{type:String,default:"show",validator:e=>rt.includes(e)}},emits:["color-change"],setup(e,{emit:a}){const t=e,r=_(null),c=_(null),g=_(null),S=_(!1),b=_(t.visibleFormats.includes(t.defaultFormat)?t.defaultFormat:t.visibleFormats[0]),d=ae({hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}),$=L(function(){const n=Object.keys(d[b.value]);return b.value!=="hex"&&t.alphaChannel==="hide"?n.slice(0,3):n}),y=L(function(){return t.alphaChannel==="hide"&&[5,9].includes(d.hex.length)?d.hex.substring(0,d.hex.length-(d.hex.length-1)/4):d.hex});function h(){const n=(t.visibleFormats.findIndex(s=>s===b.value)+1)%t.visibleFormats.length;b.value=t.visibleFormats[n]}function M(n){S.value=!0,E(n)}function oe(n){S.value=!0,U(n)}function W(){S.value=!1}function E(n){n.buttons===1&&S.value!==!1&&c.value instanceof HTMLElement&&A(c.value,n.clientX,n.clientY)}function U(n){if(S.value===!1||!(c.value instanceof HTMLElement))return;n.preventDefault();const s=n.touches[0];A(c.value,s.clientX,s.clientY)}function A(n,s,f){const w=function(V,q,ee){const i=V.getBoundingClientRect(),u=q-i.left,T=ee-i.top;return{x:D(u/i.width,0,1),y:D(1-T/i.height,0,1)}}(n,s,f),k=pe(d.hsv);k.s=w.x,k.v=w.y,B("hsv",k)}function p(n){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(n.key))return;n.preventDefault();const s=["ArrowLeft","ArrowDown"].includes(n.key)?-1:1,f=["ArrowLeft","ArrowRight"].includes(n.key)?"s":"v",w=n.shiftKey?10:1,k=d.hsv[f]+s*w*.01,V=pe(d.hsv);V[f]=D(k,0,1),B("hsv",V)}function Z(n){const s=ot(n);s!==null&&B(s.format,s.color)}function re(n,s){const f=n.currentTarget,w=pe(d.hsv);w[s]=parseInt(f.value)/parseInt(f.max),B("hsv",w)}function J(n){const s=n.target;De(s.value)&&B("hex",s.value)}function Q(n,s){const f=n.target,w=pe(d[b.value]),k=Fe[b.value][s].from(f.value);Number.isNaN(k)||k===void 0||(w[s]=k,B(b.value,w))}function B(n,s){let f=s;if(t.alphaChannel==="hide")if(typeof s!="string")s.a=1,f=s;else if([5,9].includes(s.length)){const w=(s.length-1)/4;f=s.substring(0,s.length-w)+"f".repeat(w)}else[4,7].includes(s.length)&&(f=s+"f".repeat((s.length-1)/3));if(!function(w,k){if(typeof w=="string"||typeof k=="string")return w===k;for(const V in w)if(w[V]!==k[V])return!1;return!0}(d[n],f)){(function(k,V){d[k]=V;for(const[q,ee]of at[k])d[q]=ee(d[k])})(n,f);const w=function(){const k=t.alphaChannel==="hide",V=Be(d[b.value],b.value,k);return{colors:d,cssColor:V}}();a("color-change",w)}(function(){r.value instanceof HTMLElement&&c.value instanceof HTMLElement&&g.value instanceof HTMLElement&&(r.value.style.setProperty("--vacp-hsl-h",String(d.hsl.h)),r.value.style.setProperty("--vacp-hsl-s",String(d.hsl.s)),r.value.style.setProperty("--vacp-hsl-l",String(d.hsl.l)),r.value.style.setProperty("--vacp-hsl-a",String(d.hsl.a)),c.value.style.position="relative",c.value.style.backgroundColor="hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%)",c.value.style.backgroundImage="linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)",g.value.style.boxSizing="border-box",g.value.style.position="absolute",g.value.style.left=100*d.hsv.s+"%",g.value.style.bottom=100*d.hsv.v+"%")})()}async function ne(){const n=d[b.value],s=t.alphaChannel==="hide",f=Be(n,b.value,s);await window.navigator.clipboard.writeText(f)}function ie(n,s){return Fe[n][s].to(d[n][s])}function se(n){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(n.key)||!n.shiftKey)return;const s=n.currentTarget,f=parseFloat(s.step),w=["ArrowLeft","ArrowDown"].includes(n.key)?-1:1,k=D(parseFloat(s.value)+w*f*10,parseInt(s.min),parseInt(s.max));s.value=String(k-w*f)}return je(()=>t.color,Z),Ce(function(){document.addEventListener("mousemove",E,{passive:!1}),document.addEventListener("touchmove",U,{passive:!1}),document.addEventListener("mouseup",W),document.addEventListener("touchend",W),Z(t.color)}),Re(function(){document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",U),document.removeEventListener("mouseup",W),document.removeEventListener("touchend",W)}),(n,s)=>(v(),m("div",{ref_key:"colorPicker",ref:r,class:"vacp-color-picker"},[o("div",{ref_key:"colorSpace",ref:c,class:"vacp-color-space",onMousedown:M,onTouchstart:oe},[o("div",{ref_key:"thumb",ref:g,class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:p},null,544)],544),o("div",nt,[o("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${e.id}-hue-slider`},[o("span",st,[Y(n.$slots,"hue-range-input-label",{},()=>[ve("Hue")])]),o("input",{id:`${e.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:360*d.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:se,onInput:s[0]||(s[0]=f=>re(f,"h"))},null,40,ct)],8,it),e.alphaChannel==="show"?(v(),m("label",{key:0,class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${e.id}-alpha-slider`},[o("span",dt,[Y(n.$slots,"alpha-range-input-label",{},()=>[ve("Alpha")])]),o("input",{id:`${e.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:100*d.hsv.a,type:"range",min:"0",max:"100",step:"1",onKeydownPassive:se,onInput:s[1]||(s[1]=f=>re(f,"a"))},null,40,pt)],8,ut)):C("v-if",!0)]),o("button",{class:"vacp-copy-button",type:"button",onClick:ne},[Y(n.$slots,"copy-button",{},()=>[vt,ft])]),o("div",ht,[o("div",gt,[b.value==="hex"?(v(),m("label",{key:0,class:"vacp-color-input-label",for:`${e.id}-color-hex`},[mt,o("input",{id:`${e.id}-color-hex`,class:"vacp-color-input",type:"text",value:l(y),onInput:J},null,40,yt)],8,bt)):(v(!0),m($e,{key:1},_e(l($),f=>(v(),m("label",{id:`${e.id}-color-${b.value}-${f}-label`,key:`${e.id}-color-${b.value}-${f}-label`,class:"vacp-color-input-label",for:`${e.id}-color-${b.value}-${f}`,onInput:w=>Q(w,f)},[o("span",xt,x(f.toUpperCase()),1),o("input",{id:`${e.id}-color-${b.value}-${f}`,class:"vacp-color-input",type:"text",value:ie(b.value,f),onInput:w=>Q(w,f)},null,40,kt)],40,wt))),128))]),e.visibleFormats.length>1?(v(),m("button",{key:0,class:"vacp-format-switch-button",type:"button",onClick:h},[Y(n.$slots,"format-switch-button",{},()=>[St,zt])])):C("v-if",!0)])],512))}};(function(e,a){a===void 0&&(a={});var t=a.insertAt;if(e&&typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",t==="top"&&r.firstChild?r.insertBefore(c,r.firstChild):r.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))}})(".vacp-color-picker{--vacp-color:hsl(calc(var(--vacp-hsl-h)*360) calc(var(--vacp-hsl-s)*100%) calc(var(--vacp-hsl-l)*100%)/var(--vacp-hsl-a));--vacp-focus-color:#19f;--vacp-focus-outline:2px solid var(--vacp-focus-color);--vacp-border-width:1px;--vacp-border-color:#000;--vacp-border:var(--vacp-border-width) solid var(--vacp-border-color);--vacp-color-space-width:300px;--vacp-spacing:6px;grid-gap:var(--vacp-spacing);background-color:#fff;display:grid;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:.8em;grid-template-columns:1fr min-content;max-width:var(--vacp-color-space-width);padding:var(--vacp-spacing)}.vacp-color-picker *,.vacp-color-picker :after,.vacp-color-picker :before{box-sizing:border-box}.vacp-color-picker button::-moz-focus-inner{border:none;padding:0}.vacp-color-picker :focus{outline:var(--vacp-focus-outline)}.vacp-color-space{grid-column:1/-1;height:calc(var(--vacp-color-space-width)*.6);overflow:hidden}.vacp-color-space-thumb{--vacp-thumb-size:calc(var(--vacp-spacing)*4);border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);height:var(--vacp-thumb-size);margin-bottom:calc(var(--vacp-thumb-size)*-1/2);margin-left:calc(var(--vacp-thumb-size)*-1/2);width:var(--vacp-thumb-size)}.vacp-color-space-thumb:focus{box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color),0 0 0 3px var(--vacp-focus-color);outline-color:transparent}.vacp-range-input-label{--vacp-slider-track-width:100%;--vacp-slider-track-height:calc(var(--vacp-spacing)*3);display:block}.vacp-range-input-group{display:flex;flex-direction:column;justify-content:center}.vacp-range-input-group>:not(:first-child){margin-top:var(--vacp-spacing)}.vacp-range-input,.vacp-range-input::-webkit-slider-thumb{-webkit-appearance:none}.vacp-range-input{background:none;border:none;display:block;height:var(--vacp-slider-track-height);margin-bottom:calc(var(--vacp-spacing)/2 + 1px);margin-left:0;margin-right:0;margin-top:calc(var(--vacp-spacing)/2 + 1px);padding:0;width:var(--vacp-slider-track-width)}.vacp-range-input:focus{outline:none}.vacp-range-input::-moz-focus-outer{border:none}.vacp-range-input--alpha{background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-position:0 0,var(--vacp-spacing) var(--vacp-spacing);background-size:calc(var(--vacp-spacing)*2) calc(var(--vacp-spacing)*2)}.vacp-range-input::-moz-range-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-webkit-slider-runnable-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-ms-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input:focus::-moz-range-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-webkit-slider-runnable-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-ms-track{outline:var(--vacp-focus-outline)}.vacp-range-input--alpha::-moz-range-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-webkit-slider-runnable-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-ms-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--hue::-moz-range-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-webkit-slider-runnable-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-ms-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input::-moz-range-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;width:var(--vacp-slider-track-height)}.vacp-range-input::-webkit-slider-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-range-input::-ms-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-copy-button{align-items:center;align-self:center;background-color:#fff;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;height:calc(var(--vacp-spacing)*6);justify-content:center;justify-self:center;overflow:hidden;position:relative;width:calc(var(--vacp-spacing)*6)}.vacp-copy-button:enabled:focus{border-color:var(--vacp-border-color);box-shadow:0 0 0 2px var(--vacp-focus-color);outline:none}.vacp-copy-button:enabled:hover{background-color:#0002}.vacp-color-inputs{align-items:center;display:flex;grid-column:1/-1}.vacp-color-inputs>:not(:first-child){margin-left:var(--vacp-spacing)}.vacp-color-input-group{column-gap:var(--vacp-spacing);display:grid;flex-grow:1;grid-auto-flow:column}.vacp-color-input-label{text-align:center}.vacp-color-input{border:var(--vacp-border);margin:0;margin-top:calc(var(--vacp-spacing)/2);text-align:center;width:100%}.vacp-color-input,.vacp-format-switch-button{background-color:#fff;color:inherit;font:inherit;padding:var(--vacp-spacing)}.vacp-format-switch-button{align-items:center;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;justify-content:center;margin:0}.vacp-format-switch-button:enabled:focus{border-color:var(--vacp-border-color)}.vacp-format-switch-button:enabled:hover{background-color:#0002}.vacp-visually-hidden{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}"),qe.__file="src/ColorPicker.vue";const $t={class:"flex justify-end mb-20"},_t=["disabled"],Se=le({__name:"form-footer",props:{disabled:{type:Boolean,default:!0}},setup(e){const{t:a}=Pe();return(t,r)=>(v(),m("div",$t,[o("button",{class:"hover:bg-gray-200 text-gray-600 font-bold py-8 px-16 m-2",type:"button",onClick:r[0]||(r[0]=c=>t.$emit("cancel"))},x(l(a)("wizard.step.cancel")),1),o("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-8 px-16 m-2 disabled:bg-gray-200 disabled:cursor-default disabled:text-gray-400",type:"button",disabled:e.disabled,onClick:r[1]||(r[1]=c=>t.$emit("submit"))},x(l(a)("wizard.step.continue")),9,_t)]))}}),Et=e=>(Me("data-v-f5dcf5cf"),e=e(),Ie(),e),Ft={class:"input-wrapper mb-12"},Ct={key:0},Mt={class:"text-base font-bold"},It={class:"relative py-8 mb-0.5 h-75","data-type":"file"},At=Et(()=>o("div",{class:"upload-mask absolute inset-0 flex border-dashed border-2 border-gray-400 pointer-events-none justify-center"},[o("svg",{class:"w-30 h-30 m-auto",fill:"#a8a8a8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 58 58"},[o("path",{d:"M29,58A29,29,0,1,0,0,29,29,29,0,0,0,29,58ZM29,4A25,25,0,1,1,4,29,25,25,0,0,1,29,4Z"}),o("polygon",{points:"27 22 27 44.4 31 44.4 31 22 41.7 31.1 44.3 28.1 29 15 13.7 28.1 16.3 31.1 27 22"})])],-1)),Vt={class:"text-gray-400 text-xs mb-1"},Ot={key:1},Tt={class:"text-base font-bold"},Nt={class:"mb-0.5","data-type":"url"},Lt=["value"],Ut={key:0,class:"text-red-900 text-xs"},Bt={key:2},jt={class:"text-base font-bold"},Rt={class:"relative mb-0.5","data-type":"select"},Pt={key:0},Wt=["value"],Ht=["value"],Dt={class:"text-gray-400 text-xs mb-1"},qt={key:0,class:"text-red-900 text-xs"},Gt={key:1},Kt=["size","value"],Yt=["value"],Xt={key:0,class:"text-red-900 text-xs"},Zt={key:1,class:"text-red-900 text-xs"},Jt={key:3},Qt={class:"text-base font-bold"},ea={class:"relative mb-0.5"},ta=["value"],aa={key:0,class:"text-red-900 text-xs"},la=le({__name:"form-input",props:{defaultOption:{type:Boolean,default:!1},formatError:{type:Boolean,default:!1},failureError:{type:Boolean,default:!1},help:{type:[String,Boolean],default:!1},label:{type:[String,Boolean],default:!1},modelValue:{type:[String,Array],default:""},name:{type:[String,Boolean],default:!1},options:{type:Array,default:[]},size:{type:[Number,Boolean],default:!1},multiple:{type:Boolean,default:!1},type:{type:String,default:"text"},url:{type:[String,Boolean],default:!1},validation:{type:Boolean,default:!1},validationMessages:{type:Object}},emits:["update:modelValue","link","select","upload","text"],setup(e,{emit:a}){const t=e,r=_(!1),c=_(!1),g=_(!1),S=_([]);if(t.defaultOption&&t.modelValue===""&&t.options.length){let $=t.options[0].value;if(t.name==="latField"){const y=new RegExp(/^(y|lat.*)$/i);$=t.options.find(M=>y.test(M.label))?.value||$}else if(t.name==="longField"){const y=new RegExp(/^(x|long.*)$/i);$=t.options.find(M=>y.test(M.label))?.value||$}a("update:modelValue",$)}const b=$=>{let y;try{y=new URL($)}catch{return r.value=!1,!1}y.protocol==="http:"||y.protocol==="https:"?r.value=!0:r.value=!1},d=$=>{$&&$.length>0?g.value=!1:g.value=!0};return($,y)=>(v(),m("div",Ft,[e.type==="file"?(v(),m("div",Ct,[o("label",Mt,x(e.label),1),o("div",It,[o("input",{class:"absolute w-full opacity-0 inset-0 cursor-pointer",type:"file",name:"file",accept:".geojson,.json,.csv,.zip",onInput:y[0]||(y[0]=h=>{a("upload",h.target.files[0]),h.target.value=null})},null,32),At]),o("div",Vt,x(e.help),1)])):e.type==="url"?(v(),m("div",Ot,[o("label",Tt,x(e.label),1),o("div",Nt,[o("input",{class:"text-sm w-full border-solid border-gray-300 mb-5 leading-5 focus:border-green-500",type:"url",name:"url",value:e.modelValue,onChange:y[1]||(y[1]=h=>r.value?c.value=!1:c.value=!0),onInput:y[2]||(y[2]=h=>{b(h.target.value),a("link",h.target.value,r.value),c.value=!1})},null,40,Lt)]),c.value?(v(),m("div",Ut,x(e.modelValue?e.validationMessages?.invalid:e.validationMessages?.required),1)):C("",!0)])):e.type==="select"?(v(),m("div",Bt,[o("label",jt,x(e.label),1),o("div",Rt,[e.multiple?(v(),m("div",Pt,[Ee(o("select",{class:"block border-solid border-gray-300 w-full p-3 overflow-y-auto",multiple:"",value:e.modelValue,"onUpdate:modelValue":y[3]||(y[3]=h=>S.value=h),onChange:y[4]||(y[4]=()=>{a("select",S.value),d(S.value)})},[(v(!0),m($e,null,_e(e.options,h=>(v(),m("option",{class:"p-6",key:h.label,value:h.value},x(h.label),9,Ht))),128))],40,Wt),[[Ge,S.value]]),o("div",Dt,x(e.help),1),e.validation&&g.value?(v(),m("div",qt,x(e.validationMessages?.required),1)):C("",!0)])):(v(),m("div",Gt,[o("select",{class:We(["block border-solid border-gray-300 w-full p-3 overflow-y-auto",e.size&&"configure-select"]),size:e.size?e.size:null,value:e.modelValue,onInput:y[5]||(y[5]=h=>e.size?a("select",h.target.value):a("update:modelValue",h.target.value))},[(v(!0),m($e,null,_e(e.options,h=>(v(),m("option",{class:"p-6",key:h,value:h.value},x(h.label),9,Yt))),128))],42,Kt),e.validation&&e.formatError?(v(),m("div",Xt,x(e.validationMessages?.invalid),1)):C("",!0),e.validation&&e.failureError?(v(),m("div",Zt,x(e.validationMessages?.failure),1)):C("",!0)]))])])):(v(),m("div",Jt,[o("label",Qt,x(e.label),1),o("div",ea,[o("input",{class:"border-solid border-gray-300 p-3 w-full",type:"text",value:e.modelValue,onChange:y[6]||(y[6]=h=>a("text",h.target.value))},null,40,ta)]),e.validation&&!e.modelValue?(v(),m("div",aa,x(e.validationMessages?.required),1)):C("",!0)]))]))}});const j=Ae(la,[["__scopeId","data-v-f5dcf5cf"]]),oa=e=>(Me("data-v-674cf5db"),e=e(),Ie(),e),ra={class:"step relative flex flex-col px-12 overflow-y-hidden"},na={class:"stepper-header flex pb-24"},ia={key:1,class:"flex-none stepper-check w-24 h-24 text-gray-400"},sa=oa(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",focusable:"false"},[o("g",{id:"check_circle"},[o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])],-1)),ca=[sa],ua={class:"flex flex-col overflow-hidden"},da={class:"pl-12 flex items-center text-md"},pa={class:"pl-12 text-xs transition-opacity duration-1000 ease-out"},va={class:"pl-36"},fa=le({__name:"stepper-item",props:{title:{type:String,required:!0},summary:{type:String}},setup(e){const a=He("stepper"),t=_(-1);Ce(()=>{t.value=a.numSteps++});const r=()=>a.activeIndex>t.value,c=()=>a.activeIndex===t.value;return(g,S)=>{const b=Ke("truncate");return v(),m("div",ra,[o("div",na,[r()?(v(),m("div",ia,ca)):(v(),m("div",{key:0,class:We(["w-24 h-24 bg-gray-400 rounded-full flex justify-center items-center text-white text-xs font-semibold",{"bg-blue-500":c}])},x(t.value+1),3)),o("div",ua,[o("div",da,x(e.title),1),Ee((v(),m("div",pa,[ve(x(e.summary),1)])),[[Oe,!c()],[b]])])]),O(Ye,{name:"step",mode:"out-in"},{default:R(()=>[Ee(o("div",va,[Y(g.$slots,"default",{},void 0,!0)],512),[[Oe,c()]])]),_:3})])}}});const ze=Ae(fa,[["__scopeId","data-v-674cf5db"]]),ha={class:"py-12"},ga=le({__name:"stepper",props:{activeStep:{type:Number,default:0}},setup(e){const a=e,t=L(()=>a.activeStep),r=ae([]),c=ae({activeIndex:a.activeStep,numSteps:0});return Xe("stepper",c),r.push(je(t,()=>{c.activeIndex=a.activeStep})),Re(()=>{r.forEach(g=>g())}),(g,S)=>(v(),m("div",ha,[Y(g.$slots,"default")]))}}),Ve=e=>(Me("data-v-178a4fa3"),e=e(),Ie(),e),ba=Ve(()=>o("span",{class:"block text-center mb-10"},"or",-1)),ma={key:0,class:"inline-flex items-center mb-10"},ya=Ve(()=>o("svg",{class:"inline-block fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{d:"M0 0h24v24H0z",fill:"none"}),o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})],-1)),wa={class:"px-5 text-xs"},xa=["for"],ka={key:6,class:"text-base font-bold"},Sa={class:"sr-only"},za={class:"sr-only"},$a=Ve(()=>o("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15"},[o("path",{d:"M5 0v2H1v13h12v-3h-1v2H2V5h10v3h1V2H9V0zm1 1h2v2h3v1H3V3h3z",fill:"currentColor"}),o("path",{d:"M10 7v2h5v2h-5v2l-3-3zM3 6h5v1H3zm0 2h3v1H3zm0 2h3v1H3zm0 2h5v1H3z",fill:"currentColor"})],-1)),_a=le({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const a=Ze(),{t}=Pe(),r=He("iApi"),c=_(),g=L(()=>a.layerSource),S=L(()=>a.currStep),b=_(),d=_(),$=_(!1),y=_(!1),h=_(!1),M=_(!1),oe=ae([{value:z.FEATURE,label:t("wizard.layerType.esriFeature")},{value:z.MAPIMAGE,label:t("wizard.layerType.esriMapImage")},{value:z.TILE,label:t("wizard.layerType.esriTile")},{value:z.IMAGERY,label:t("wizard.layerType.esriImagery")},{value:z.WMS,label:t("wizard.layerType.ogcWms")},{value:z.WFS,label:t("wizard.layerType.ogcWfs")}]),W=ae([{value:z.GEOJSON,label:t("wizard.fileType.geojson")},{value:z.SHAPEFILE,label:t("wizard.fileType.shapefile")},{value:z.CSV,label:t("wizard.fileType.csv")}]),E=L({get(){return a.url},set(i){a.url=i}}),U=L({get(){return a.fileData},set(i){a.fileData=i}}),A=L({get(){return a.typeSelection},set(i){a.typeSelection=i}}),p=L({get(){return a.layerInfo},set(i){a.layerInfo=i}}),Z=L(()=>{let i=r.geo.proxy!=="";switch(A.value){case z.FEATURE:case z.MAPIMAGE:case z.TILE:case z.IMAGERY:return!i;case z.WFS:return!0;case z.WMS:return!i;case z.GEOJSON:case z.SHAPEFILE:case z.CSV:return!!(n()&&!U.value);default:return!1}});Je(()=>((S.value===H.FORMAT||S.value===H.CONFIGURE)&&($.value=!0,a.goToStep(H.FORMAT)),!1)),Ce(()=>{S.value===H.CONFIGURE&&(p.value?.configOptions.includes("colour")&&q(),M.value=!p.value?.configOptions.includes("sublayers")&&!!p.value?.config.name)});const re=async i=>{const u=new FileReader;u.onload=T=>{U.value=u.result,E.value=i.name,J(T)},u.readAsArrayBuffer(i)},J=i=>{i?.preventDefault(),A.value=g.value.guessFormatFromURL(E.value),a.goToStep(H.FORMAT)},Q=async()=>{y.value=!1;try{p.value=n()?await g.value.fetchFileInfo(E.value,A.value,U.value):await g.value.fetchServiceInfo(E.value,A.value),n()&&U.value&&delete p.value.config.url}catch{y.value=!0;return}const i=A.value===z.FEATURE&&!(p.value&&p.value.fields);if(!p.value||i){$.value=!0,p.value={config:{id:"Placeholder",layerType:z.UNKNOWN,url:""},configOptions:[]};return}q(),a.goToStep(H.CONFIGURE),p.value.configOptions.includes("sublayers")?M.value=!1:M.value=!0},B=async i=>{const u=Object.assign(p.value.config,i),T=r.geo.layer.createLayer(u);r.geo.map.addLayer(T),T.userAdded=!0,r.event.emit(et.USER_LAYER_ADDED,T),h.value=!1,a.goToStep(H.UPLOAD)},ne=()=>p.value?.fields.map(i=>({value:i.name,label:i.alias||i.name})),ie=i=>p.value?.latLonFields[i].map(u=>({value:u,label:u})),se=()=>p.value?.layers.map((i,u)=>({label:`${i.indent}${i.name}`,value:A.value===z.MAPIMAGE?{index:i.id,state:{opacity:1,visibility:!0}}:{id:i.id},id:`${i.indent}${i.name}-${u}`})),n=()=>U.value||E.value.match(/\.(zip|csv|json|geojson)$/),s=i=>{re(i),E.value=""},f=(i,u)=>{E.value=i.trim(),u?h.value=!0:h.value=!1},w=i=>{A.value=i,$.value=!1},k=i=>{p.value.config.name=i;const u=p.value?.config.sublayers;(u?i&&u.length>0:i)?M.value=!0:M.value=!1},V=i=>{p.value.config.sublayers=i,i.length>0&&p.value?.config.name?M.value=!0:M.value=!1},q=()=>{b.value=p.value?.config.colour??"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");do d.value=Math.random().toString(36).substring(2,9);while(document.getElementById(d.value+"-hue-slider")!==null)},ee=i=>{p.value.config.colour=i.colors.hex.substring(0,7),tt(()=>{c.value.querySelector(".vacp-copy-button").style.backgroundColor=p.value?.config.colour})};return(i,u)=>{const T=Qe("panel-screen");return v(),P(T,{panel:e.panel},{header:R(()=>[ve(x(l(t)("wizard.title")),1)]),content:R(()=>[O(ga,{activeStep:l(S)},{default:R(()=>[O(ze,{title:l(t)("wizard.upload.title"),summary:l(E)},{default:R(()=>[o("form",{name:"upload",onSubmit:J},[O(j,{type:"file",name:"file",label:l(t)("wizard.upload.file.label"),help:l(t)("wizard.upload.file.help"),onUpload:s},null,8,["label","help"]),ba,O(j,{type:"url",name:"url",modelValue:l(E),"onUpdate:modelValue":u[0]||(u[0]=F=>Te(E)?E.value=F:null),label:l(t)("wizard.upload.url.label"),onLink:f,validation:!0,"validation-messages":{required:l(t)("wizard.upload.url.error.required"),invalid:l(t)("wizard.upload.url.error.url")}},null,8,["modelValue","label","validation-messages"]),O(Se,{onSubmit:J,onCancel:u[1]||(u[1]=()=>{h.value=!1,l(a).goToStep(0)}),disabled:!h.value},null,8,["disabled"])],32)]),_:1},8,["title","summary"]),O(ze,{title:l(t)("wizard.format.title"),summary:l(A)},{default:R(()=>[o("form",{name:"format",onSubmit:Q},[l(Z)?(v(),m("div",ma,[ya,o("span",wa,x(l(t)("wizard.format.info.cors")),1)])):C("",!0),O(j,{type:"select",name:"type",modelValue:l(A),"onUpdate:modelValue":u[2]||(u[2]=F=>Te(A)?A.value=F:null),onSelect:w,size:n()?W.length:oe.length,label:n()?l(t)("wizard.format.type.file"):l(t)("wizard.format.type.service"),options:n()?W:oe,formatError:$.value,failureError:y.value,validation:!0,"validation-messages":{required:l(t)("wizard.format.type.error.required"),invalid:l(t)("wizard.format.type.error.invalid"),failure:`${l(t)("wizard.format.type.error.failure")}.${l(Z)?" "+l(t)("wizard.format.warn.cors")+".":""}`},onKeydown:u[3]||(u[3]=Ne(()=>{},["stop"]))},null,8,["modelValue","size","label","options","formatError","failureError","validation-messages"]),O(Se,{onSubmit:Q,onCancel:u[4]||(u[4]=()=>{$.value=!1,y.value=!1,l(E)?h.value=!0:h.value=!1,l(a).goToStep(0)}),disabled:!1})],32)]),_:1},8,["title","summary"]),O(ze,{title:l(t)("wizard.configure.title")},{default:R(()=>[o("form",{name:"configure",onSubmit:B,ref_key:"formElement",ref:c},[l(p)?.configOptions.includes("name")?(v(),P(j,{key:0,type:"text",name:"name",modelValue:l(p).config.name,"onUpdate:modelValue":u[5]||(u[5]=F=>l(p).config.name=F),onText:k,label:l(t)("wizard.configure.name.label"),validation:!0,"validation-messages":{required:l(t)("wizard.configure.name.error.required")}},null,8,["modelValue","label","validation-messages"])):C("",!0),l(p)?.configOptions.includes("nameField")?(v(),P(j,{key:1,type:"select",name:"nameField",modelValue:l(p).config.nameField,"onUpdate:modelValue":u[6]||(u[6]=F=>l(p).config.nameField=F),label:l(t)("wizard.configure.nameField.label"),defaultOption:!0,options:ne()},null,8,["modelValue","label","options"])):C("",!0),l(p)?.configOptions.includes("tooltipField")?(v(),P(j,{key:2,type:"select",name:"tooltipField",modelValue:l(p).config.tooltipField,"onUpdate:modelValue":u[7]||(u[7]=F=>l(p).config.tooltipField=F),label:l(t)("wizard.configure.tooltipField.label"),options:ne()},null,8,["modelValue","label","options"])):C("",!0),l(p)?.configOptions.includes("latField")?(v(),P(j,{key:3,type:"select",name:"latField",modelValue:l(p).config.latField,"onUpdate:modelValue":u[8]||(u[8]=F=>l(p).config.latField=F),defaultOption:!0,label:l(t)("wizard.configure.latField.label"),options:ie("lat")},null,8,["modelValue","label","options"])):C("",!0),l(p)?.configOptions.includes("longField")?(v(),P(j,{key:4,type:"select",name:"longField",modelValue:l(p).config.longField,"onUpdate:modelValue":u[9]||(u[9]=F=>l(p).config.longField=F),defaultOption:!0,label:l(t)("wizard.configure.longField.label"),options:ie("lon")},null,8,["modelValue","label","options"])):C("",!0),l(p)?.configOptions.includes("sublayers")?(v(),P(j,{key:5,type:"select",name:"sublayers",modelValue:l(p).config.sublayers,"onUpdate:modelValue":u[10]||(u[10]=F=>l(p).config.sublayers=F),onSelect:V,label:l(t)("wizard.configure.sublayers.label"),help:l(t)("wizard.configure.sublayers.help"),options:se(),multiple:!0,validation:!0,"validation-messages":{required:l(t)("wizard.configure.sublayers.error.required")},onKeydown:u[11]||(u[11]=Ne(()=>{},["stop"]))},null,8,["modelValue","label","help","options","validation-messages"])):C("",!0),o("label",{class:"sr-only",for:`${d.value}-color-hex`},x(l(t)("wizard.configure.colour.hex")),9,xa),l(p)?.configOptions.includes("colour")?(v(),m("label",ka,x(l(t)("wizard.configure.colour.label")),1)):C("",!0),l(p)?.configOptions.includes("colour")?(v(),P(l(qe),{key:7,"alpha-channel":"hide","visible-formats":["hex"],"default-format":"hex",id:d.value,color:b.value,onColorChange:ee},{"hue-range-input-label":R(()=>[o("span",Sa,x(l(t)("wizard.configure.colour.hue")),1)]),"copy-button":R(()=>[o("span",za,x(l(t)("wizard.configure.colour.copy")),1),$a]),_:1},8,["id","color"])):C("",!0),O(Se,{onSubmit:B,onCancel:u[12]||(u[12]=F=>l(a).goToStep(1)),disabled:!M.value},null,8,["disabled"])],544)]),_:1},8,["title"])]),_:1},8,["activeStep"])]),_:1},8,["panel"])}}});const Ca=Ae(_a,[["__scopeId","data-v-178a4fa3"]]);export{Ca as default};
